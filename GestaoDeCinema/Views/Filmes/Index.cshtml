@model IEnumerable<GestaoDeCinema.Models.Filme>

@{
    ViewData["Title"] = "Gestão de Filmes";
}

<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="utf-8" />
    <title>@ViewData["Title"]</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="~/css/cinemaTheme.css" />
    <style>
        body { background-color: #181113; color: white; font-family: 'Plus Jakarta Sans', sans-serif; }
        .container { max-width: 1200px; margin: 40px auto; }
        .card-filme { background-color: #1e1e1e; border: 1px solid #333; border-radius: 12px; padding: 20px; margin-bottom: 20px; }
        .btn-primary-custom { background-color: #ec135b; color: white; font-weight: 600; border: none; border-radius: 8px; padding: 10px 24px; }
        .btn-primary-custom:hover { background-color: #c90f4d; }
        .btn-icon { width: 32px; height: 32px; border-radius: 6px; display: inline-flex; align-items: center; justify-content: center; border: none; background: transparent; color: #a0a0a0; }
        .btn-icon:hover { background-color: rgba(255,255,255,0.1); color: white; }
        .btn-icon.delete:hover { background-color: rgba(220, 53, 69, 0.2); color: #dc3545; }
        .movie-poster-small { width: 100px; height: 150px; object-fit: cover; border-radius: 8px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-5">
            <div>
                <h1 class="h3 fw-bold mb-2">@ViewData["Title"]</h1>
                <p class="text-muted mb-0">Gira os filmes disponíveis no cinema</p>
            </div>
            <div class="d-flex gap-3">
                <a asp-controller="Admin" asp-action="Index" class="btn btn-outline-secondary">
                    Voltar ao Dashboard
                </a>
                <a asp-action="Create" class="btn-primary-custom d-flex align-items-center gap-2">
                    <span class="material-symbols-outlined">add</span>
                    Adicionar Filme
                </a>
            </div>
        </div>

        @if (!Model.Any())
        {
            <div class="card-filme text-center py-5">
                <span class="material-symbols-outlined fs-1 text-muted mb-3">movie</span>
                <h3 class="h5 text-muted">Nenhum filme cadastrado</h3>
                <p class="text-muted small mb-3">Comece adicionando o primeiro filme ao sistema</p>
                <a asp-action="Create" class="btn-primary-custom">Adicionar Primeiro Filme</a>
            </div>
        }
        else
        {
            <div class="row g-4">
                @foreach (var filme in Model)
                {
                    <div class="col-md-6">
                        <div class="card-filme">
                            <div class="d-flex gap-3">
                                @{
                                    var imagemUrl = !string.IsNullOrEmpty(filme.CapaImagem) 
                                        ? $"/imagens/{filme.CapaImagem}" 
                                        : "https://via.placeholder.com/100x150?text=Sem+Capa";
                                }
                                <img src="@imagemUrl" alt="@filme.Titulo" class="movie-poster-small" />
                                
                                <div class="flex-grow-1">
                                    <h3 class="h5 fw-bold mb-2">@filme.Titulo</h3>
                                    <p class="text-muted small mb-2 d-flex align-items-center gap-3">
                                        <span>@filme.Genero</span>
                                        <span>•</span>
                                        <span>@filme.Duracao min</span>
                                    </p>
                                    @if (!string.IsNullOrEmpty(filme.Sinopse))
                                    {
                                        <p class="text-muted small mb-3">
                                            @(filme.Sinopse.Length > 100 ? filme.Sinopse.Substring(0, 100) + "..." : filme.Sinopse)
                                        </p>
                                    }
                                    <div class="d-flex gap-2 mt-3">
                                        <a asp-action="Details" asp-route-id="@filme.Id" class="btn-icon" title="Ver">
                                            <span class="material-symbols-outlined">visibility</span>
                                        </a>
                                        <a asp-action="Edit" asp-route-id="@filme.Id" class="btn-icon" title="Editar">
                                            <span class="material-symbols-outlined">edit</span>
                                        </a>
                                        <a asp-action="Delete" asp-route-id="@filme.Id" class="btn-icon delete" title="Eliminar">
                                            <span class="material-symbols-outlined">delete</span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        }
    </div>
</body>
</html>
